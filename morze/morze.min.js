const CODES={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----.",0:"-----",".":"......",",":".-.-.-",":":"---...",";":"-.-.-.","(":"-.--.-","`":".----.",'"':".-..-.","-":"-....-","/":"-..-.","!":"..--..","?":"--..--",_:"-...-","@":".--.-.",ERR:"........",END:"..-.-"};let Morze=a=>{let b=require("@amperka/buzzer").connect(a.buzzer),c=require("@amperka/button").connect(a.button,{holdTime:.2}),d=null,e=[],f=this;b.frequency(3e3);let g=()=>d=setTimeout(()=>{let a=i(e.join(""));e=[];d=null;return f.emit("response",a)},500);let h=()=>g();let i=a=>{for(let b in CODES)if(CODES[b]===a)return b;return null};c.on("press",()=>{b.turnOn();if(d)return clearTimeout(d)});c.on("click",()=>e.push("."));c.on("hold",()=>e.push("-"));c.on("release",()=>{b.turnOff();if(!e.length)return;return h()})};exports.init=(a=>new Morze(a));